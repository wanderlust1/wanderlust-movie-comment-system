<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="dao.HeroDaoImpl">

	<!-- 查询所有英雄 -->
	<select id="queryAllHero" resultType="Map">
		select *
		from hero
	</select>

	<!-- 查询指定英雄 param = hero.name -->
	<select id="queryHero" resultType="Map" parameterType="String">
		select *
		from hero
		where alias like '%' + #{0} + '%' or name like '%' + #{0} + '%' or title like '%' + #{0} + '%'
	</select>

	<!-- 查询所有装备 -->
	<select id="queryAllItem" resultType="Map">
		select *
		from equipment
	</select>

	<!-- 查询指定英雄的合适装备 param = hero.alias, hero.currentLine -->
	<select id="querySuitItem" resultType="Map" parameterType="Map">
		select equipment.*
		from equipment, suitable
		where alias = #{alias}
			and way = #{way}
			and equipment.id = suitable.id
	</select>

	<!-- 广义查询合适装备，即不限制英雄分路 param = hero.alias -->
	<select id="querySuitItemWild" resultType="Map" parameterType="Map">
		select equipment.*
		from equipment, suitable
		where alias = #{0}
        and way != 'Support'
		and equipment.id = suitable.id
	</select>

	<!-- 查询指定英雄的对位胜率 param = hero.alias1, hero.alias2, hero.currentLine -->
	<select id="queryWinRate" resultType="Map" parameterType="Map">
		select rate
		from matchRate
		where alias = #{alias1}
			and c_alias = #{alias2}
			and way = #{way}
	</select>

</mapper>

